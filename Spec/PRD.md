# 退休金計算工具 - 產品需求文檔 (PRD)

## 1. 產品概述

### 1.1 背景與目標
退休金計算工具是一款網頁應用，旨在幫助用戶規劃退休財務，根據目前的資產、投資策略、通膨率和退休計劃，計算退休前的資產累積以及退休後資金可支撐的年限。應用採用清新、簡潔、易用的設計，支援中文和英文，完全離線運行，並可未來轉為 Chrome Extension。

### 1.2 目標用戶
- **主要用戶**：20-50 歲的職場人士，關注退休規劃，具備基礎投資知識（了解股票、債券報酬率等）。
- **使用場景**：用戶希望快速模擬退休財務，了解定期投資的效果以及退休後資金的持續性。

### 1.3 成功指標
- 用戶能在 1 分鐘內完成輸入並獲得準確結果。
- 圖表清晰展示資產增長和資金消耗趨勢。
- 用戶滿意度高（UI 直觀、操作簡單）。
- 未來 Chrome Extension 版本可快速部署（重用 > 80% 網頁應用代碼）。

## 2. 功能需求

### 2.1 輸入參數
應用採用三步驟設計，引導用戶輸入以下數據：

#### 2.1.1 資產累積階段
- **目前年紀**：整數（例如 30）。
- **總資產**：股票 + 債券總額（例如 $50,000）。
- **股票年化報酬率**：百分比（例如 7%）。
- **債券年化報酬率**：百分比（例如 3%）。
- **股債比例**：股票和債券百分比（例如 70% 股票、30% 債券，總和需 100%）。
- **定期定額投資**：金額 + 頻率（每月或每年，例如 $1,000/月或 $12,000/年）。

#### 2.1.2 退休提領階段
- **退休年紀**：整數（例如 65）。
- **通膨率**：百分比（例如 2%）。
- **退休後股債比例**：股票和債券百分比（例如 50% 股票、50% 債券）。
- **退休後每年支出**：金額（例如 $40,000/年，隨通膨調整）。

**輸入驗證**：
- 不設置硬性範圍限制，但對無效輸入（負數、空白）顯示警告。
- 股債比例總和需等於 100%，否則提示修正。
- 退休年紀需大於目前年紀。

### 2.2 計算邏輯

#### 2.2.1 退休前資產累積
- **計算方法**：
  - 若選擇**每年定額投資**：
    ```
    FV = PV * (1 + r)^n + PMT * ((1 + r)^n - 1) / r
    ```
    - **PV**：初始資產（股票 + 債券總額）。
    - **r**：加權平均年化報酬率（股票報酬率 × 股票比例 + 債券報酬率 × 債券比例）。
    - **n**：投資年數（退休年紀 - 目前年紀）。
    - **PMT**：每年投入金額。
  - 若選擇**每月定額投資**：
    ```
    FV = PV * (1 + r_m)^(n*12) + PMT_m * ((1 + r_m)^(n*12) - 1) / r_m
    ```
    - **PV**：初始資產。
    - **r_m**：月度報酬率（r_m = (1 + r)^(1/12) - 1）。
    - **n*12**：總投資月數（投資年數 × 12）。
    - **PMT_m**：每月投入金額。
- **輸出**：退休時總資產（例如 $1,264,844.13）。

#### 2.2.2 退休後資金消耗
- **計算方法**：
  - 每年支出隨通膨調整：第 t 年支出 = 初始支出 * (1 + 通膨率)^t。
  - 使用退休後股債比例計算加權平均報酬率。
  - 模擬每年資產變動：資產 = 上一年資產 * (1 + 報酬率) - 當年支出，直到資產 ≤ 0。
- **輸出**：
  - 資金可支撐年限（例如 30 年）。
  - 資金耗盡年紀（例如 95 歲）。

### 2.3 視覺化
- **資產增長曲線**：
  - 展示從目前年紀到退休年紀的資產增長（以年為單位）。
  - X 軸：年份；Y 軸：資產金額（美元）。
- **資金消耗曲線**：
  - 展示從退休年紀到資金耗盡的資產減少（以年為單位）。
  - X 軸：年份；Y 軸：資產金額（美元）。
- **要求**：
  - 圖表支援交互（懸停顯示年份和金額）。
  - 清新、簡潔風格（藍色/綠色主調）。
  - 自動調整 Y 軸範圍適應資產規模。
  - 若數據點過多（例如投資 > 30 年），適當採樣（每 2-3 年一個數據點）。

### 2.4 交互功能
- **儲存輸入**：自動保存用戶輸入，刷新頁面後恢復。
- **重置按鈕**：清除所有輸入並恢復預設值。
- **重新計算按鈕**：根據當前輸入更新結果和圖表。
- **編輯輸入**：從計算階段返回修改資產累積或退休提領數據。
- **語言切換**：提供中文/英文切換（預設根據瀏覽器語言）。

### 2.5 輸出格式
- **文字結果**：
  - 退休時總資產（例如「退休時總資產：$1,264,844.13」）。
  - 資金可支撐年限（例如「資金可支撐：30 年」）。
  - 資金耗盡年紀（例如「資金耗盡年紀：95 歲」）。
- **圖表**：資產增長曲線和資金消耗曲線。

### 2.6 UI 設計
- **設計原則**：
  - 清新、簡潔、易用，採用藍色/綠色主調，支援暗/亮模式。
  - 響應式設計，適配手機、平板和桌面端。
  - 支援中文和英文，預設根據瀏覽器語言設置。
- **畫面結構**：三步驟引導式設計：
  1. **資產累積階段**：
     - 表單字段：目前年紀、總資產、股票/債券報酬率、股債比例、定期定額（金額 + 頻率）。
     - 交互：即時驗證（例如股債比例總和 100%），「下一步」按鈕。
     - UI：卡片式表單（圓角、陰影），垂直排列，帶標籤和單位（$、%）。
  2. **退休提領階段**：
     - 表單字段：退休年紀、通膨率、退休後股債比例、每年支出。
     - 交互：即時驗證（例如退休年紀 > 目前年紀），「上一步」和「下一步」按鈕。
     - UI：與第一步驟一致的卡片式設計，顯示進度條（例如「第 2/3 步」）。
  3. **計算階段**：
     - 顯示：文字結果（總資產、可支撐年限、耗盡年紀）和圖表（資產增長/資金消耗曲線）。
     - 交互：「編輯輸入」按鈕返回修改，「重置」按鈕清空數據。
     - UI：結果在上，圖表在下，手機端優先顯示結果，圖表可縮放。
- **進度指示器**：頂部顯示步驟標籤（例如「1. 資產累積 > 2. 退休提領 > 3. 計算結果」），當前步驟高亮。
- **語言切換**：右上角提供下拉選單（中文/英文）。

## 3. 非功能需求
- **易用性**：
  - UI 直觀，表單帶提示文字（例如「請輸入目前年紀」）。
  - 每個步驟輸入字段 < 6 個，避免認知負擔。
- **性能**：
  - 計算完成時間 < 500ms。
  - 圖表渲染時間 < 1s。
- **安全性**：
  - 所有數據本地處理，無需上傳伺服器。
- **離線支援**：
  - 應用完全離線運行，數據儲存於用戶設備。
- **可重用性**：
  - 功能模組化，支援未來轉為 Chrome Extension。

## 4. 優先級
- **MVP 功能**（3-4 週）：
  - 三步驟 UI（資產累積、退休提領、計算結果）。
  - 按月/年複利計算邏輯。
  - 圖表展示（資產增長/資金消耗曲線）。
  - 數據儲存和語言切換。
- **後續功能**（未來迭代）：
  - 敏感性分析（模擬不同報酬率/通膨率）。
  - 匯出報告（PDF/CSV）。
  - Chrome Extension 版本。

## 5. 假設與約束
- **假設**：
  - 用戶對投資報酬率和通膨率有基本了解。
  - 報酬率和通膨率假設為穩定值（不考慮市場波動）。
  - 用戶設備支援現代瀏覽器（Chrome、Firefox、Safari）。
- **約束**：
  - 計算精確度依賴前端實現，可能受極端輸入影響。
  - 圖表需平衡視覺效果和性能。

## 6. 風險與緩解措施
- **風險**：用戶輸入極端值（例如超高報酬率）導致結果不合理。
  - **緩解**：顯示警告提示，建議合理範圍（例如報酬率 0-15%）。
- **風險**：新手用戶因輸入字段過多感到困惑。
  - **緩解**：三步驟設計分拆輸入，添加提示文字和驗證。
- **風險**：圖表在手機端渲染緩慢。
  - **緩解**：限制數據點（以年為單位，適當採樣）。